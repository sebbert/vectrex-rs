use memory::Memory;
use super::instruction::{Instruction, Mnemonic, Addressing};

pub fn parse_instruction(mem: &Memory, addr: u16) -> Option<Instruction> {
	const PAGE_2: u8 = 0x10;
	const PAGE_3: u8 = 0x11;

	let mut pc = addr;
	let op = mem.read_u8(addr);

	match op {
		0x10 => {
			pc += 1;
			let op = mem.read_u8(pc);
			match op {
				0x83 => Some(Instruction(Mnemonic::Cmpd, Addressing::Immediate16)),
				0x93 => Some(Instruction(Mnemonic::Cmpd, Addressing::Direct)),
				0xa3 => Some(Instruction(Mnemonic::Cmpd, Addressing::Indexed)),
				0xb3 => Some(Instruction(Mnemonic::Cmpd, Addressing::Extended)),
				0x8c => Some(Instruction(Mnemonic::Cmpy, Addressing::Immediate16)),
				0x9c => Some(Instruction(Mnemonic::Cmpy, Addressing::Direct)),
				0xac => Some(Instruction(Mnemonic::Cmpy, Addressing::Indexed)),
				0xbc => Some(Instruction(Mnemonic::Cmpy, Addressing::Extended)),
				0xce => Some(Instruction(Mnemonic::Lds, Addressing::Immediate16)),
				0xde => Some(Instruction(Mnemonic::Lds, Addressing::Direct)),
				0xee => Some(Instruction(Mnemonic::Lds, Addressing::Indexed)),
				0xfe => Some(Instruction(Mnemonic::Lds, Addressing::Extended)),
				0x8e => Some(Instruction(Mnemonic::Ldy, Addressing::Immediate16)),
				0x9e => Some(Instruction(Mnemonic::Ldy, Addressing::Direct)),
				0xae => Some(Instruction(Mnemonic::Ldy, Addressing::Indexed)),
				0xbe => Some(Instruction(Mnemonic::Ldy, Addressing::Extended)),
				0x9f => Some(Instruction(Mnemonic::Sty, Addressing::Direct)),
				0xaf => Some(Instruction(Mnemonic::Sty, Addressing::Indexed)),
				0xbf => Some(Instruction(Mnemonic::Sty, Addressing::Extended)),
				0x3f => Some(Instruction(Mnemonic::Swi2, Addressing::Inherent)),
				0x27 => Some(Instruction(Mnemonic::Beq, Addressing::Relative16)),
				0x2c => Some(Instruction(Mnemonic::Bge, Addressing::Relative16)),
				0x2e => Some(Instruction(Mnemonic::Bgt, Addressing::Relative16)),
				0x22 => Some(Instruction(Mnemonic::Bhi, Addressing::Relative16)),
				0x24 => Some(Instruction(Mnemonic::Bhs, Addressing::Relative16)),
				0x2f => Some(Instruction(Mnemonic::Ble, Addressing::Relative16)),
				0x25 => Some(Instruction(Mnemonic::Blo, Addressing::Relative16)),
				0x23 => Some(Instruction(Mnemonic::Bls, Addressing::Relative16)),
				0x2d => Some(Instruction(Mnemonic::Blt, Addressing::Relative16)),
				0x2b => Some(Instruction(Mnemonic::Bmi, Addressing::Relative16)),
				0x26 => Some(Instruction(Mnemonic::Bne, Addressing::Relative16)),
				0x2a => Some(Instruction(Mnemonic::Bpl, Addressing::Relative16)),
				0x21 => Some(Instruction(Mnemonic::Brn, Addressing::Relative16)),
				0x28 => Some(Instruction(Mnemonic::Bvc, Addressing::Relative16)),
				0x29 => Some(Instruction(Mnemonic::Bvs, Addressing::Relative16)),


				_ => None
			}
		},
		0x11 => {
			pc += 1;
			let op = mem.read_u8(pc);
			match op {
				0x8c => Some(Instruction(Mnemonic::Cmps, Addressing::Immediate16)),
				0x9c => Some(Instruction(Mnemonic::Cmps, Addressing::Direct)),
				0xac => Some(Instruction(Mnemonic::Cmps, Addressing::Indexed)),
				0xbc => Some(Instruction(Mnemonic::Cmps, Addressing::Extended)),
				0x83 => Some(Instruction(Mnemonic::Cmpu, Addressing::Immediate16)),
				0x93 => Some(Instruction(Mnemonic::Cmpu, Addressing::Direct)),
				0xa3 => Some(Instruction(Mnemonic::Cmpu, Addressing::Indexed)),
				0xb3 => Some(Instruction(Mnemonic::Cmpu, Addressing::Extended)),
				0x3f => Some(Instruction(Mnemonic::Swi3, Addressing::Inherent)),


				_ => None
			}
		},
		0x3a => Some(Instruction(Mnemonic::Abx, Addressing::Inherent)),
		0x89 => Some(Instruction(Mnemonic::Adca, Addressing::Immediate8)),
		0x99 => Some(Instruction(Mnemonic::Adca, Addressing::Direct)),
		0xa9 => Some(Instruction(Mnemonic::Adca, Addressing::Indexed)),
		0xb9 => Some(Instruction(Mnemonic::Adca, Addressing::Extended)),
		0xc9 => Some(Instruction(Mnemonic::Adcb, Addressing::Immediate8)),
		0xd9 => Some(Instruction(Mnemonic::Adcb, Addressing::Direct)),
		0xe9 => Some(Instruction(Mnemonic::Adcb, Addressing::Indexed)),
		0xf9 => Some(Instruction(Mnemonic::Adcb, Addressing::Extended)),
		0x8b => Some(Instruction(Mnemonic::Adda, Addressing::Immediate8)),
		0x9b => Some(Instruction(Mnemonic::Adda, Addressing::Direct)),
		0xab => Some(Instruction(Mnemonic::Adda, Addressing::Indexed)),
		0xbb => Some(Instruction(Mnemonic::Adda, Addressing::Extended)),
		0xcb => Some(Instruction(Mnemonic::Addb, Addressing::Immediate8)),
		0xdb => Some(Instruction(Mnemonic::Addb, Addressing::Direct)),
		0xeb => Some(Instruction(Mnemonic::Addb, Addressing::Indexed)),
		0xfb => Some(Instruction(Mnemonic::Addb, Addressing::Extended)),
		0xc3 => Some(Instruction(Mnemonic::Addd, Addressing::Immediate16)),
		0xd3 => Some(Instruction(Mnemonic::Addd, Addressing::Direct)),
		0xe3 => Some(Instruction(Mnemonic::Addd, Addressing::Indexed)),
		0xf3 => Some(Instruction(Mnemonic::Addd, Addressing::Extended)),
		0x84 => Some(Instruction(Mnemonic::Anda, Addressing::Immediate8)),
		0x94 => Some(Instruction(Mnemonic::Anda, Addressing::Direct)),
		0xa4 => Some(Instruction(Mnemonic::Anda, Addressing::Indexed)),
		0xb4 => Some(Instruction(Mnemonic::Anda, Addressing::Extended)),
		0xc4 => Some(Instruction(Mnemonic::Andb, Addressing::Immediate8)),
		0xd4 => Some(Instruction(Mnemonic::Andb, Addressing::Direct)),
		0xe4 => Some(Instruction(Mnemonic::Andb, Addressing::Indexed)),
		0xf4 => Some(Instruction(Mnemonic::Andb, Addressing::Extended)),
		0x1c => Some(Instruction(Mnemonic::Andcc, Addressing::Immediate8)),
		0x48 => Some(Instruction(Mnemonic::Asla, Addressing::Inherent)),
		0x58 => Some(Instruction(Mnemonic::Aslb, Addressing::Inherent)),
		0x08 => Some(Instruction(Mnemonic::Asl, Addressing::Direct)),
		0x68 => Some(Instruction(Mnemonic::Asl, Addressing::Indexed)),
		0x78 => Some(Instruction(Mnemonic::Asl, Addressing::Extended)),
		0x47 => Some(Instruction(Mnemonic::Asra, Addressing::Inherent)),
		0x57 => Some(Instruction(Mnemonic::Asrb, Addressing::Inherent)),
		0x07 => Some(Instruction(Mnemonic::Asr, Addressing::Direct)),
		0x67 => Some(Instruction(Mnemonic::Asr, Addressing::Indexed)),
		0x77 => Some(Instruction(Mnemonic::Asr, Addressing::Extended)),
		0x85 => Some(Instruction(Mnemonic::Bita, Addressing::Immediate8)),
		0x95 => Some(Instruction(Mnemonic::Bita, Addressing::Direct)),
		0xa5 => Some(Instruction(Mnemonic::Bita, Addressing::Indexed)),
		0xb5 => Some(Instruction(Mnemonic::Bita, Addressing::Extended)),
		0xc5 => Some(Instruction(Mnemonic::Bitb, Addressing::Immediate8)),
		0xd5 => Some(Instruction(Mnemonic::Bitb, Addressing::Direct)),
		0xe5 => Some(Instruction(Mnemonic::Bitb, Addressing::Indexed)),
		0xf5 => Some(Instruction(Mnemonic::Bitb, Addressing::Extended)),
		0x4f => Some(Instruction(Mnemonic::Clra, Addressing::Inherent)),
		0x5f => Some(Instruction(Mnemonic::Clrb, Addressing::Inherent)),
		0x0f => Some(Instruction(Mnemonic::Clr, Addressing::Direct)),
		0x6f => Some(Instruction(Mnemonic::Clr, Addressing::Indexed)),
		0x7f => Some(Instruction(Mnemonic::Clr, Addressing::Extended)),
		0x81 => Some(Instruction(Mnemonic::Cmpa, Addressing::Immediate8)),
		0x91 => Some(Instruction(Mnemonic::Cmpa, Addressing::Direct)),
		0xa1 => Some(Instruction(Mnemonic::Cmpa, Addressing::Indexed)),
		0xb1 => Some(Instruction(Mnemonic::Cmpa, Addressing::Extended)),
		0xc1 => Some(Instruction(Mnemonic::Cmpb, Addressing::Immediate8)),
		0xd1 => Some(Instruction(Mnemonic::Cmpb, Addressing::Direct)),
		0xe1 => Some(Instruction(Mnemonic::Cmpb, Addressing::Indexed)),
		0xf1 => Some(Instruction(Mnemonic::Cmpb, Addressing::Extended)),
		0x8c => Some(Instruction(Mnemonic::Cmpx, Addressing::Immediate16)),
		0x9c => Some(Instruction(Mnemonic::Cmpx, Addressing::Direct)),
		0xac => Some(Instruction(Mnemonic::Cmpx, Addressing::Indexed)),
		0xbc => Some(Instruction(Mnemonic::Cmpx, Addressing::Extended)),
		0x44 => Some(Instruction(Mnemonic::Lsra, Addressing::Inherent)),
		0x54 => Some(Instruction(Mnemonic::Lsrb, Addressing::Inherent)),
		0x04 => Some(Instruction(Mnemonic::Lsr, Addressing::Direct)),
		0x64 => Some(Instruction(Mnemonic::Lsr, Addressing::Indexed)),
		0x74 => Some(Instruction(Mnemonic::Lsr, Addressing::Extended)),
		0x3d => Some(Instruction(Mnemonic::Mul, Addressing::Inherent)),
		0x40 => Some(Instruction(Mnemonic::Nega, Addressing::Inherent)),
		0x50 => Some(Instruction(Mnemonic::Negb, Addressing::Inherent)),
		0x00 => Some(Instruction(Mnemonic::Neg, Addressing::Direct)),
		0x60 => Some(Instruction(Mnemonic::Neg, Addressing::Indexed)),
		0x70 => Some(Instruction(Mnemonic::Neg, Addressing::Extended)),
		0x12 => Some(Instruction(Mnemonic::Nop, Addressing::Inherent)),
		0x8a => Some(Instruction(Mnemonic::Ora, Addressing::Immediate8)),
		0x9a => Some(Instruction(Mnemonic::Ora, Addressing::Direct)),
		0xaa => Some(Instruction(Mnemonic::Ora, Addressing::Indexed)),
		0xba => Some(Instruction(Mnemonic::Ora, Addressing::Extended)),
		0xca => Some(Instruction(Mnemonic::Orb, Addressing::Immediate8)),
		0xda => Some(Instruction(Mnemonic::Orb, Addressing::Direct)),
		0xea => Some(Instruction(Mnemonic::Orb, Addressing::Indexed)),
		0xfa => Some(Instruction(Mnemonic::Orb, Addressing::Extended)),
		0x1a => Some(Instruction(Mnemonic::Orcc, Addressing::Immediate8)),
		0x34 => Some(Instruction(Mnemonic::Pshs, Addressing::Immediate8)),
		0x36 => Some(Instruction(Mnemonic::Pshu, Addressing::Immediate8)),
		0x35 => Some(Instruction(Mnemonic::Puls, Addressing::Immediate8)),
		0x37 => Some(Instruction(Mnemonic::Pulu, Addressing::Immediate8)),
		0x49 => Some(Instruction(Mnemonic::Rola, Addressing::Inherent)),
		0x59 => Some(Instruction(Mnemonic::Rolb, Addressing::Inherent)),
		0x09 => Some(Instruction(Mnemonic::Rol, Addressing::Direct)),
		0x69 => Some(Instruction(Mnemonic::Rol, Addressing::Indexed)),
		0x79 => Some(Instruction(Mnemonic::Rol, Addressing::Extended)),
		0x46 => Some(Instruction(Mnemonic::Rora, Addressing::Inherent)),
		0x56 => Some(Instruction(Mnemonic::Rorb, Addressing::Inherent)),
		0x06 => Some(Instruction(Mnemonic::Ror, Addressing::Direct)),
		0x66 => Some(Instruction(Mnemonic::Ror, Addressing::Indexed)),
		0x76 => Some(Instruction(Mnemonic::Ror, Addressing::Extended)),
		0x3b => Some(Instruction(Mnemonic::Rti, Addressing::Inherent)),
		0x39 => Some(Instruction(Mnemonic::Rts, Addressing::Inherent)),
		0x82 => Some(Instruction(Mnemonic::Sbca, Addressing::Immediate8)),
		0x92 => Some(Instruction(Mnemonic::Sbca, Addressing::Direct)),
		0xa2 => Some(Instruction(Mnemonic::Sbca, Addressing::Indexed)),
		0xb2 => Some(Instruction(Mnemonic::Sbca, Addressing::Extended)),
		0xc2 => Some(Instruction(Mnemonic::Sbcb, Addressing::Immediate8)),
		0xd2 => Some(Instruction(Mnemonic::Sbcb, Addressing::Direct)),
		0xe2 => Some(Instruction(Mnemonic::Sbcb, Addressing::Indexed)),
		0xf2 => Some(Instruction(Mnemonic::Sbcb, Addressing::Extended)),
		0x1d => Some(Instruction(Mnemonic::Sex, Addressing::Inherent)),
		0x43 => Some(Instruction(Mnemonic::Coma, Addressing::Inherent)),
		0x53 => Some(Instruction(Mnemonic::Comb, Addressing::Inherent)),
		0x03 => Some(Instruction(Mnemonic::Com, Addressing::Direct)),
		0x63 => Some(Instruction(Mnemonic::Com, Addressing::Indexed)),
		0x73 => Some(Instruction(Mnemonic::Com, Addressing::Extended)),
		0x3c => Some(Instruction(Mnemonic::Cwai, Addressing::Immediate8)),
		0x19 => Some(Instruction(Mnemonic::Daa, Addressing::Inherent)),
		0x4a => Some(Instruction(Mnemonic::Deca, Addressing::Inherent)),
		0x5a => Some(Instruction(Mnemonic::Decb, Addressing::Inherent)),
		0x0a => Some(Instruction(Mnemonic::Dec, Addressing::Direct)),
		0x6a => Some(Instruction(Mnemonic::Dec, Addressing::Indexed)),
		0x7a => Some(Instruction(Mnemonic::Dec, Addressing::Extended)),
		0x88 => Some(Instruction(Mnemonic::Eora, Addressing::Immediate8)),
		0x98 => Some(Instruction(Mnemonic::Eora, Addressing::Direct)),
		0xa8 => Some(Instruction(Mnemonic::Eora, Addressing::Indexed)),
		0xb8 => Some(Instruction(Mnemonic::Eora, Addressing::Extended)),
		0xc8 => Some(Instruction(Mnemonic::Eorb, Addressing::Immediate8)),
		0xd8 => Some(Instruction(Mnemonic::Eorb, Addressing::Direct)),
		0xe8 => Some(Instruction(Mnemonic::Eorb, Addressing::Indexed)),
		0xf8 => Some(Instruction(Mnemonic::Eorb, Addressing::Extended)),
		0x1e => Some(Instruction(Mnemonic::Exg, Addressing::Immediate8)),
		0x4c => Some(Instruction(Mnemonic::Inca, Addressing::Inherent)),
		0x5c => Some(Instruction(Mnemonic::Incb, Addressing::Inherent)),
		0x0c => Some(Instruction(Mnemonic::Inc, Addressing::Direct)),
		0x6c => Some(Instruction(Mnemonic::Inc, Addressing::Indexed)),
		0x7c => Some(Instruction(Mnemonic::Inc, Addressing::Extended)),
		0x0e => Some(Instruction(Mnemonic::Jmp, Addressing::Direct)),
		0x6e => Some(Instruction(Mnemonic::Jmp, Addressing::Indexed)),
		0x7e => Some(Instruction(Mnemonic::Jmp, Addressing::Extended)),
		0x9d => Some(Instruction(Mnemonic::Jsr, Addressing::Direct)),
		0xad => Some(Instruction(Mnemonic::Jsr, Addressing::Indexed)),
		0xbd => Some(Instruction(Mnemonic::Jsr, Addressing::Extended)),
		0x86 => Some(Instruction(Mnemonic::Lda, Addressing::Immediate8)),
		0x96 => Some(Instruction(Mnemonic::Lda, Addressing::Direct)),
		0xa6 => Some(Instruction(Mnemonic::Lda, Addressing::Indexed)),
		0xb6 => Some(Instruction(Mnemonic::Lda, Addressing::Extended)),
		0xc6 => Some(Instruction(Mnemonic::Ldb, Addressing::Immediate8)),
		0xd6 => Some(Instruction(Mnemonic::Ldb, Addressing::Direct)),
		0xe6 => Some(Instruction(Mnemonic::Ldb, Addressing::Indexed)),
		0xf6 => Some(Instruction(Mnemonic::Ldb, Addressing::Extended)),
		0xcc => Some(Instruction(Mnemonic::Ldd, Addressing::Immediate16)),
		0xdc => Some(Instruction(Mnemonic::Ldd, Addressing::Direct)),
		0xec => Some(Instruction(Mnemonic::Ldd, Addressing::Indexed)),
		0xfc => Some(Instruction(Mnemonic::Ldd, Addressing::Extended)),
		0xce => Some(Instruction(Mnemonic::Ldu, Addressing::Immediate16)),
		0xde => Some(Instruction(Mnemonic::Ldu, Addressing::Direct)),
		0xee => Some(Instruction(Mnemonic::Ldu, Addressing::Indexed)),
		0xfe => Some(Instruction(Mnemonic::Ldu, Addressing::Extended)),
		0x8e => Some(Instruction(Mnemonic::Ldx, Addressing::Immediate16)),
		0x9e => Some(Instruction(Mnemonic::Ldx, Addressing::Direct)),
		0xae => Some(Instruction(Mnemonic::Ldx, Addressing::Indexed)),
		0xbe => Some(Instruction(Mnemonic::Ldx, Addressing::Extended)),
		0x32 => Some(Instruction(Mnemonic::Leas, Addressing::Indexed)),
		0x33 => Some(Instruction(Mnemonic::Leau, Addressing::Indexed)),
		0x30 => Some(Instruction(Mnemonic::Leax, Addressing::Indexed)),
		0x31 => Some(Instruction(Mnemonic::Leay, Addressing::Indexed)),
		0x97 => Some(Instruction(Mnemonic::Sta, Addressing::Direct)),
		0xa7 => Some(Instruction(Mnemonic::Sta, Addressing::Indexed)),
		0xb7 => Some(Instruction(Mnemonic::Sta, Addressing::Extended)),
		0xd7 => Some(Instruction(Mnemonic::Stb, Addressing::Direct)),
		0xe7 => Some(Instruction(Mnemonic::Stb, Addressing::Indexed)),
		0xf7 => Some(Instruction(Mnemonic::Stb, Addressing::Extended)),
		0xdd => Some(Instruction(Mnemonic::Std, Addressing::Direct)),
		0xed => Some(Instruction(Mnemonic::Std, Addressing::Indexed)),
		0xfd => Some(Instruction(Mnemonic::Std, Addressing::Extended)),
		0xdf => Some(Instruction(Mnemonic::Stu, Addressing::Direct)),
		0xef => Some(Instruction(Mnemonic::Stu, Addressing::Indexed)),
		0xff => Some(Instruction(Mnemonic::Stu, Addressing::Extended)),
		0x9f => Some(Instruction(Mnemonic::Stx, Addressing::Direct)),
		0xaf => Some(Instruction(Mnemonic::Stx, Addressing::Indexed)),
		0xbf => Some(Instruction(Mnemonic::Stx, Addressing::Extended)),
		0x80 => Some(Instruction(Mnemonic::Suba, Addressing::Immediate8)),
		0x90 => Some(Instruction(Mnemonic::Suba, Addressing::Direct)),
		0xa0 => Some(Instruction(Mnemonic::Suba, Addressing::Indexed)),
		0xb0 => Some(Instruction(Mnemonic::Suba, Addressing::Extended)),
		0xc0 => Some(Instruction(Mnemonic::Subb, Addressing::Immediate8)),
		0xd0 => Some(Instruction(Mnemonic::Subb, Addressing::Direct)),
		0xe0 => Some(Instruction(Mnemonic::Subb, Addressing::Indexed)),
		0xf0 => Some(Instruction(Mnemonic::Subb, Addressing::Extended)),
		0x83 => Some(Instruction(Mnemonic::Subd, Addressing::Immediate16)),
		0x93 => Some(Instruction(Mnemonic::Subd, Addressing::Direct)),
		0xa3 => Some(Instruction(Mnemonic::Subd, Addressing::Indexed)),
		0xb3 => Some(Instruction(Mnemonic::Subd, Addressing::Extended)),
		0x3f => Some(Instruction(Mnemonic::Swi, Addressing::Inherent)),
		0x13 => Some(Instruction(Mnemonic::Sync, Addressing::Inherent)),
		0x1f => Some(Instruction(Mnemonic::Tfr, Addressing::Immediate8)),
		0x4d => Some(Instruction(Mnemonic::Tsta, Addressing::Inherent)),
		0x5d => Some(Instruction(Mnemonic::Tstb, Addressing::Inherent)),
		0x0d => Some(Instruction(Mnemonic::Tst, Addressing::Direct)),
		0x6d => Some(Instruction(Mnemonic::Tst, Addressing::Indexed)),
		0x7d => Some(Instruction(Mnemonic::Tst, Addressing::Extended)),
		0x27 => Some(Instruction(Mnemonic::Beq, Addressing::Relative8)),
		0x2c => Some(Instruction(Mnemonic::Bge, Addressing::Relative8)),
		0x2e => Some(Instruction(Mnemonic::Bgt, Addressing::Relative8)),
		0x22 => Some(Instruction(Mnemonic::Bhi, Addressing::Relative8)),
		0x24 => Some(Instruction(Mnemonic::Bhs, Addressing::Relative8)),
		0x2f => Some(Instruction(Mnemonic::Ble, Addressing::Relative8)),
		0x25 => Some(Instruction(Mnemonic::Blo, Addressing::Relative8)),
		0x23 => Some(Instruction(Mnemonic::Bls, Addressing::Relative8)),
		0x2d => Some(Instruction(Mnemonic::Blt, Addressing::Relative8)),
		0x2b => Some(Instruction(Mnemonic::Bmi, Addressing::Relative8)),
		0x26 => Some(Instruction(Mnemonic::Bne, Addressing::Relative8)),
		0x2a => Some(Instruction(Mnemonic::Bpl, Addressing::Relative8)),
		0x20 => Some(Instruction(Mnemonic::Bra, Addressing::Relative8)),
		0x16 => Some(Instruction(Mnemonic::Bra, Addressing::Relative16)),
		0x21 => Some(Instruction(Mnemonic::Brn, Addressing::Relative8)),
		0x8d => Some(Instruction(Mnemonic::Bsr, Addressing::Relative8)),
		0x17 => Some(Instruction(Mnemonic::Bsr, Addressing::Relative16)),
		0x28 => Some(Instruction(Mnemonic::Bvc, Addressing::Relative8)),
		0x29 => Some(Instruction(Mnemonic::Bvs, Addressing::Relative8)),

		_ => None
	}
}